# ğŸ”§ FIX: Teacher Parameter Not Working on Wix

## ğŸš¨ Problem:
Your Wix page `https://umairrafiq.wixsite.com/kidtools?teacher=MsSanam` is not showing the teacher banner.

## ğŸ¯ Root Cause:
When you embed HTML in Wix, it creates an **iframe** which blocks access to the parent page URL due to **cross-origin security restrictions**.

---

## âœ… SOLUTION 1: Set Teacher Name in Code (EASIEST)

### Step-by-Step:

1. **Open your Wix Editor**
2. **Click on the HTML embed** element
3. **Edit the code**
4. **Add this at the VERY TOP** (before everything else):

```html
<script>
    window.TEACHER_NAME = 'MsSanam';
</script>

<!-- Rest of your HTML code below -->
<!DOCTYPE html>
<html lang="en">
...
```

### Example for Multiple Teachers:

#### **Ms. Sanam's Page:**
```html
<script>
    window.TEACHER_NAME = 'MsSanam';
</script>
<!DOCTYPE html>
<html>
...rest of code...
```

#### **Ms. Catie's Page:**
```html
<script>
    window.TEACHER_NAME = 'MsCatie';
</script>
<!DOCTYPE html>
<html>
...rest of code...
```

---

## âœ… SOLUTION 2: Use Wix Velo to Pass Parameter

If you have Wix Velo (Developer Mode) enabled:

### Step 1: Enable Velo
1. Click **Dev Mode** in Wix Editor
2. This enables Wix's code editor

### Step 2: Add to Page Code
In your page's code tab (usually called `page.js`):

```javascript
import wixLocation from 'wix-location';
import wixWindow from 'wix-window';

$w.onReady(function () {
    // Get teacher from URL
    const teacher = wixLocation.query.teacher;
    
    if (teacher) {
        // Send message to embedded HTML
        const htmlElement = $w('#htmlEmbed1'); // Use your element ID
        
        // Post message to iframe
        htmlElement.postMessage({
            type: 'setTeacher',
            teacher: teacher
        });
    }
});
```

### Step 3: Update HTML to Receive Message
Add this to your embedded HTML (inside the `<script>` tag):

```javascript
// Listen for messages from Wix
window.addEventListener('message', function(event) {
    if (event.data.type === 'setTeacher') {
        window.TEACHER_NAME = event.data.teacher;
        // Reload or reinitialize
        location.reload();
    }
});
```

---

## âœ… SOLUTION 3: Create Separate Pages (RECOMMENDED)

The **most reliable** solution:

### Create One Wix Page Per Teacher:

1. **Page 1:** `/mssanam`
   - Embed HTML with: `window.TEACHER_NAME = 'MsSanam';`
   - Share: `yoursite.com/mssanam`

2. **Page 2:** `/mscatie`
   - Embed HTML with: `window.TEACHER_NAME = 'MsCatie';`
   - Share: `yoursite.com/mscatie`

3. **Page 3:** `/mrsmith`
   - Embed HTML with: `window.TEACHER_NAME = 'MrSmith';`
   - Share: `yoursite.com/mrsmith`

**Benefits:**
- âœ… No URL parameters needed
- âœ… Reliable and simple
- âœ… Each teacher has branded page
- âœ… No cross-origin issues

---

## ğŸ” How to Check If It's Working:

1. **Open your Wix page** in browser
2. **Press F12** (opens Developer Tools)
3. **Go to Console tab**
4. **Look for messages** like:
   - `Teacher from window variable: MsSanam` âœ… WORKING
   - `Cannot access parent URL (cross-origin)` âš ï¸ NOT WORKING
   - `No teacher parameter found` âŒ NOT WORKING

---

## ğŸ“ Complete Code Template for Wix:

```html
<!-- SET TEACHER NAME HERE -->
<script>
    window.TEACHER_NAME = 'MsSanam';  // âš ï¸ CHANGE THIS FOR EACH PAGE
</script>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ Math Stars Challenge ğŸŒŸ</title>
    <style>
        /* All your CSS here */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* ... rest of CSS ... */
    </style>
</head>
<body>
    <!-- All your HTML body content -->
    
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        // ... rest of your JavaScript ...
        
        // The code will now check window.TEACHER_NAME FIRST
        // before trying to read from URL
    </script>
</body>
</html>
```

---

## ğŸ¯ Quick Fix for Your Current Page:

### For: `https://umairrafiq.wixsite.com/kidtools?teacher=MsSanam`

1. **Edit the HTML embed** on that page
2. **Add at the VERY TOP:**
   ```html
   <script>
       window.TEACHER_NAME = 'MsSanam';
   </script>
   ```
3. **Save and Publish**
4. **Refresh the page**
5. **You should see:** ğŸ« Class of MsSanam

---

## ğŸ“Š Debugging Steps:

### Step 1: Check Console
Open browser console (F12) and look for:
```
Teacher from window variable: MsSanam
```

### Step 2: Verify Banner
After setting `window.TEACHER_NAME`, you should see:
```
ğŸ« Class of MsSanam
```

### Step 3: Test Student Login
1. Enter a student name
2. Click "Start Game"
3. Student should see: "Teacher: MsSanam" in their stats

---

## ğŸ”„ Migration Path:

### Current Setup:
- One page: `/kidtools`
- URL: `?teacher=MsSanam` (not working due to iframe)

### Recommended Setup:
- Multiple pages: `/mssanam`, `/mscatie`, `/mrsmith`
- Each has hardcoded teacher name
- No URL parameters needed

### Steps:
1. Create new page `/mssanam`
2. Copy your HTML embed
3. Add `window.TEACHER_NAME = 'MsSanam';` at top
4. Publish
5. Share: `umairrafiq.wixsite.com/mssanam`

---

## âš ï¸ Important Notes:

### Why URL Parameters Don't Work:
- Wix embeds HTML in an **iframe**
- Iframes have **different origin** than parent page
- Browser **security** blocks reading parent URL
- This is **normal** browser behavior

### Why window.TEACHER_NAME Works:
- Set **inside** the iframe
- No cross-origin issues
- JavaScript can access it directly
- Simple and reliable

---

## ğŸš€ Updated Code Available:

I've updated the code in `C:\kidtools\index.html` to:
1. âœ… Check `window.TEACHER_NAME` FIRST (for Wix)
2. âœ… Try URL parameters (for direct access)
3. âœ… Try parent URL (for iframe if allowed)
4. âœ… Fall back to hash parameters

**Priority Order:**
1. `window.TEACHER_NAME` â† Best for Wix
2. Current URL `?teacher=`
3. Parent URL `?teacher=`
4. Hash `#teacher=`

---

## ğŸ“ Immediate Action:

### To fix your current page RIGHT NOW:

1. Go to Wix Editor
2. Click your HTML embed
3. Click "Edit Code"
4. Add at the VERY top:
   ```html
   <script>window.TEACHER_NAME='MsSanam';</script>
   ```
5. Click "Apply"
6. Click "Publish"
7. Refresh page
8. Done! âœ…

---

## ğŸ“ Summary:

**Problem:** Cross-origin iframe blocks URL reading
**Solution:** Set `window.TEACHER_NAME` in embedded code
**Result:** Teacher banner appears correctly

**Your Wix site will work perfectly with this simple one-line addition!** ğŸ‰
